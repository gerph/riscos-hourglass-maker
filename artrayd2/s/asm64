          AREA |C$$code|, CODE, READONLY

; constants
width             * 32
height            * 32
period            * 2
wordsperrow       * 2
nwords            * 1206
nframes           * 78
active_x          * 16
active_y          * 16

; Workspace for changing the hourglass rendition
                  ^ 0, x12
hg_framenum       # 4                         ; frame number
hg_percentage     # 4                         ; percentage to show (N/I)
hg_leds           # 4                         ; LED flags (N/I)
hg_oldpointer     # 4                         ; Old pointer configuration
hg_oldcolours     # 4 * 3                     ; Old palette entries
hg_defcolours     # 4 * 3                     ; Default palette entries
hg_curcolours     # 4 * 3                     ; Current palette entries
hg_word           # 12                        ; OS_Word block
hg_currentdata    # 4 * wordsperrow * height  ; Current data for the hourglass
hg_workspacesize  * :INDEX: @                 ; Size of this workspace

; SWI numbers
XOS_Byte          * 0x20006
XOS_Word          * 0x20007
XOS_ReadPalette   * 0x2002F

; -------------------------------------------------
        MACRO
$label  SIGNATURE
        ALIGN   4
        =       "$label",0
        ALIGN   4
        DCD     &FF000000+(:LEN:"$label"+4):AND::NOT:3
$label
        MEND

        MACRO
$label  SWI     $name
$label
        MOV     x10, #$name :AND: &FFFF
        ADD     x10, x10, #$name :AND: &FFFF0000
        SVC     #0
        MEND


; Data for deltas between frames
deltas
          ; frame 0
          DCD     &00000000, &00000000, &00000000
          DCD     &00000008, &00000000, &00000000
          DCD     &00000010, &00000000, &00000000
          DCD     &00000018, &00000000, &00000000
          DCD     &00000020, &55554000, &00055555
          DCD     &00000028, &55555000, &00055555
          DCD     &00000030, &55554000, &00055555
          DCD     &00000038, &00040000, &00005000
          DCD     &00000040, &41040000, &00005155
          DCD     &00000048, &50140000, &00005155
          DCD     &00000050, &50140000, &00001055
          DCD     &00000058, &54500000, &00001455
          DCD     &00000060, &50500000, &00000515
          DCD     &00000068, &51400000, &00000505
          DCD     &00000070, &41000000, &00000141
          DCD     &00000078, &05000000, &00000141
          DCD     &00000080, &05000000, &00000140
          DCD     &00000088, &01400000, &00000100
          DCD     &00000090, &00400000, &00000500
          DCD     &00000098, &00500000, &00001400
          DCD     &000000a0, &00140000, &00001400
          DCD     &000000a8, &00140000, &00005000
          DCD     &000000b0, &00040000, &00005000
          DCD     &000000b8, &00040000, &00005000
          DCD     &000000c0, &00150000, &00005000
          DCD     &000000c8, &55555000, &00055555
          DCD     &000000d0, &55555000, &00055555
          DCD     &000000d8, &00000000, &00000000
          DCD     &000000e0, &00000000, &00000000
          DCD     &000000e8, &00000000, &00000000
          DCD     &000000f0, &00000000, &00000000
          DCD     &000000f8, &00000000, &00000000
          DCD     -1
          ; frame 1
          DCD     &00000030, &55555000, &00005555
          DCD     &00000038, &00050000, &00005000
          DCD     &00000040, &01450000, &00005055
          DCD     &00000048, &51040000, &00001055
          DCD     &00000050, &54140000, &00001455
          DCD     &00000058, &54140000, &00001455
          DCD     &00000070, &41400000, &00000141
          DCD     &00000088, &01400000, &00000500
          DCD     &00000090, &01400000, &00000500
          DCD     &000000a0, &00500000, &00001000
          DCD     &000000b0, &00140000, &00005000
          DCD     &000000b8, &00040000, &00004000
          DCD     &000000c0, &00140000, &00055550
          DCD     &000000c8, &55554000, &00155555
          DCD     &000000d0, &55554000, &00055555
          DCD     -1
          ; frame 2
          DCD     &00000020, &55400000, &00055555
          DCD     &00000038, &00050000, &00001000
          DCD     &00000040, &01450000, &00001055
          DCD     &00000048, &51450000, &00001055
          DCD     &00000058, &54140000, &00000455
          DCD     &00000060, &54500000, &00000515
          DCD     &00000068, &50400000, &00000105
          DCD     &00000080, &05000000, &00000141
          DCD     &00000090, &01400000, &00000400
          DCD     &000000a0, &00500000, &00005000
          DCD     &000000a8, &00100000, &00005000
          DCD     &000000b0, &00140000, &00004000
          DCD     &000000b8, &00140000, &00004000
          DCD     &000000d8, &00150000, &00000000
          DCD     -1
          ; frame 3
          DCD     &00000020, &55000000, &00055555
          DCD     &00000028, &55555000, &00015555
          DCD     &00000030, &55555000, &00001555
          DCD     &00000040, &00050000, &00001010
          DCD     &00000048, &51450000, &00001455
          DCD     &00000050, &54040000, &00001455
          DCD     &00000058, &54140000, &00000415
          DCD     &00000068, &50500000, &00000105
          DCD     &00000088, &01000000, &00000500
          DCD     &000000b8, &00140000, &00014000
          DCD     &000000c0, &00140000, &00155554
          DCD     &000000c8, &55550000, &00155555
          DCD     &000000d8, &00550000, &00000000
          DCD     -1
          ; frame 4
          DCD     &00000020, &55500000, &00055555
          DCD     &00000028, &55555000, &00055555
          DCD     &00000030, &55555000, &00005555
          DCD     &00000040, &00050000, &00001000
          DCD     &00000048, &41450000, &00001055
          DCD     &00000050, &50140000, &00001455
          DCD     &00000058, &54140000, &00000455
          DCD     &00000068, &51400000, &00000105
          DCD     &00000088, &01400000, &00000501
          DCD     &00000090, &01400000, &00000500
          DCD     &000000a8, &00140000, &00005000
          DCD     &000000b8, &00140000, &00004000
          DCD     &000000c0, &00140000, &00055550
          DCD     &000000c8, &55554000, &00155555
          DCD     &000000d8, &00150000, &00000000
          DCD     -1
          ; frame 5
          DCD     &00000020, &55554000, &00055555
          DCD     &00000038, &00050000, &00005000
          DCD     &00000040, &00050000, &00005000
          DCD     &00000048, &41040000, &00001055
          DCD     &00000050, &55140000, &00001455
          DCD     &00000058, &54140000, &00001455
          DCD     &00000060, &50500000, &00000515
          DCD     &00000068, &51400000, &00000505
          DCD     &000000a0, &00100000, &00001000
          DCD     &000000b0, &00140000, &00005000
          DCD     &000000b8, &00040000, &00004000
          DCD     &000000c0, &00140000, &00055540
          DCD     &000000d8, &00000000, &00000000
          DCD     -1
          ; frame 6
          DCD     &00000030, &55554000, &00015555
          DCD     &00000038, &00040000, &00005000
          DCD     &00000040, &00040000, &00005000
          DCD     &00000048, &05040000, &00005055
          DCD     &00000058, &54100000, &00001455
          DCD     &00000068, &51400000, &00000515
          DCD     &00000070, &41400000, &00000145
          DCD     &00000088, &01400000, &00000101
          DCD     &00000090, &00400000, &00000501
          DCD     &000000a0, &00100000, &00001400
          DCD     &000000b0, &00040000, &00005000
          DCD     &000000b8, &00040000, &00005000
          DCD     &000000c0, &00140000, &00005000
          DCD     &000000c8, &55554000, &00055555
          DCD     &000000d0, &55555000, &00055555
          DCD     -1
          ; frame 7
          DCD     &00000030, &55554000, &00055555
          DCD     &00000048, &04140000, &00005054
          DCD     &00000050, &55140000, &00001055
          DCD     &00000058, &54500000, &00001455
          DCD     &00000060, &50500000, &00000555
          DCD     &00000070, &41000000, &00000145
          DCD     &00000088, &41400000, &00000101
          DCD     &000000a0, &00140000, &00001400
          DCD     &000000c0, &00150000, &00005000
          DCD     &000000c8, &55555000, &00055555
          DCD     -1
          ; frame 8
          DCD     &00000048, &00140000, &00005010
          DCD     &00000060, &54500000, &00000555
          DCD     -1
          ; frame 9
          DCD     &00000048, &00140000, &00005000
          DCD     &00000050, &54140000, &00001055
          DCD     &00000088, &01400000, &00000101
          DCD     &00000090, &40400000, &00000501
          DCD     &00000098, &00500000, &00001401
          DCD     -1
          ; frame 10
          DCD     -1
          ; frame 11
          DCD     &00000050, &40140000, &00001055
          DCD     &00000098, &40500000, &00001401
          DCD     &000000a0, &00140000, &00001401
          DCD     -1
          ; frame 12
          DCD     -1
          ; frame 13
          DCD     &00000050, &00140000, &00001055
          DCD     &00000058, &50500000, &00001455
          DCD     &00000060, &50500000, &00000555
          DCD     &000000a0, &40140000, &00001401
          DCD     &000000a8, &00140000, &00005001
          DCD     -1
          ; frame 14
          DCD     &00000050, &00140000, &00001014
          DCD     &00000060, &50500000, &00000515
          DCD     -1
          ; frame 15
          DCD     &00000050, &00140000, &00001000
          DCD     &00000058, &00500000, &00001415
          DCD     &000000a8, &40140000, &00005001
          DCD     &000000b0, &00040000, &00005001
          DCD     -1
          ; frame 16
          DCD     &00000058, &00500000, &00001400
          DCD     &00000060, &00500000, &00000505
          DCD     &00000068, &41400000, &00000505
          DCD     &00000070, &41000000, &00000141
          DCD     -1
          ; frame 17
          DCD     &00000060, &00500000, &00000500
          DCD     &00000068, &01400000, &00000500
          DCD     &00000070, &01000000, &00000140
          DCD     &000000b8, &00040000, &00005001
          DCD     -1
          ; frame 18
          DCD     &00000078, &05000000, &00000140
          DCD     &00000088, &41400000, &00000101
          DCD     &000000a8, &40140000, &00005005
          DCD     &000000b0, &40040000, &00005005
          DCD     &000000b8, &40040000, &00005001
          DCD     -1
          ; frame 19
          DCD     &00000080, &05000000, &00000140
          DCD     &00000088, &01400000, &00000101
          DCD     &000000a0, &40140000, &00001405
          DCD     &000000b0, &50040000, &00005015
          DCD     &000000b8, &40040000, &00005005
          DCD     -1
          ; frame 20
          DCD     &00000090, &00400000, &00000501
          DCD     &000000a0, &50140000, &00001405
          DCD     &000000a8, &50140000, &00005015
          DCD     &000000b8, &50040000, &00005015
          DCD     -1
          ; frame 21
          DCD     &00000088, &01400000, &00000100
          DCD     &00000098, &40500000, &00001405
          DCD     &000000a0, &50140000, &00001415
          DCD     &000000a8, &54140000, &00005055
          DCD     &000000b0, &54040000, &00005055
          DCD     -1
          ; frame 22
          DCD     &00000098, &50500000, &00001415
          DCD     &000000a0, &54140000, &00001415
          DCD     &000000b8, &54040000, &00005015
          DCD     -1
          ; frame 23
          DCD     &000000a0, &54140000, &00001455
          DCD     &000000b0, &55040000, &00005055
          DCD     -1
          ; frame 24
          DCD     &00000070, &01400000, &00000140
          DCD     &00000078, &05000000, &00000040
          DCD     &00000088, &01400000, &00000140
          DCD     &00000090, &40400000, &00000501
          DCD     &00000098, &50500000, &00001405
          DCD     &000000a0, &54140000, &00001415
          DCD     &000000a8, &55140000, &00005055
          DCD     -1
          ; frame 25
          DCD     -1
          ; frame 26
          DCD     -1
          ; frame 27
          DCD     -1
          ; frame 28
          DCD     -1
          ; frame 29
          DCD     -1
          ; frame 30
          DCD     -1
          ; frame 31
          DCD     -1
          ; frame 32
          DCD     -1
          ; frame 33
          DCD     -1
          ; frame 34
          DCD     -1
          ; frame 35
          DCD     -1
          ; frame 36
          DCD     -1
          ; frame 37
          DCD     -1
          ; frame 38
          DCD     -1
          ; frame 39
          DCD     -1
          ; frame 40
          DCD     -1
          ; frame 41
          DCD     -1
          ; frame 42
          DCD     -1
          ; frame 43
          DCD     &00000020, &55554000, &00000015
          DCD     &00000028, &55550000, &00155555
          DCD     &00000030, &54540000, &00155555
          DCD     &00000038, &00140000, &00054000
          DCD     &00000040, &00140000, &00014000
          DCD     &00000048, &00100000, &00004000
          DCD     &00000050, &00500000, &00005000
          DCD     &00000058, &00500000, &00005000
          DCD     &00000060, &01400000, &00001400
          DCD     &00000070, &05000000, &00000140
          DCD     &00000078, &05000000, &00000140
          DCD     &00000080, &01400000, &00000040
          DCD     &00000090, &50500000, &00000101
          DCD     &00000098, &54140000, &00000505
          DCD     &000000a0, &55040000, &00000415
          DCD     &000000a8, &55450000, &00001415
          DCD     &000000b0, &55050000, &00001415
          DCD     &000000b8, &40050000, &00001015
          DCD     &000000c0, &15555400, &00001400
          DCD     &000000c8, &55555400, &00005555
          DCD     &000000d0, &55550000, &00015555
          DCD     &000000d8, &00000000, &00015550
          DCD     -1
          ; frame 44
          DCD     &00000018, &00050000, &00000000
          DCD     &00000030, &54500000, &00155555
          DCD     &00000038, &00140000, &00155000
          DCD     &00000040, &00100000, &00014000
          DCD     &00000048, &00100000, &00014000
          DCD     &00000070, &05000000, &00000540
          DCD     &000000b0, &55010000, &00001415
          DCD     &000000b8, &40010000, &00001415
          DCD     &000000c8, &55555400, &00001555
          DCD     &000000d0, &55540000, &00015555
          DCD     -1
          ; frame 45
          DCD     &00000018, &00000000, &00000000
          DCD     &00000020, &55554000, &00000055
          DCD     &00000028, &55554000, &00155555
          DCD     &00000030, &55540000, &00155555
          DCD     &00000038, &00140000, &00014000
          DCD     &00000040, &00140000, &00004000
          DCD     &00000048, &00140000, &00004000
          DCD     &00000058, &00500000, &00001000
          DCD     &00000060, &00400000, &00001400
          DCD     &00000070, &05000000, &00000140
          DCD     &00000090, &50500000, &00000501
          DCD     &000000a0, &55140000, &00001415
          DCD     &000000a8, &55050000, &00001415
          DCD     &000000b0, &55050000, &00001055
          DCD     &000000b8, &40050000, &00001015
          DCD     &000000c0, &15555000, &00001000
          DCD     &000000c8, &55555000, &00015555
          DCD     &000000d0, &55555000, &00015555
          DCD     &000000d8, &00000000, &00015540
          DCD     -1
          ; frame 46
          DCD     &00000020, &55554000, &00055555
          DCD     &00000028, &55555000, &00055555
          DCD     &00000030, &55554000, &00055555
          DCD     &00000038, &00040000, &00005000
          DCD     &00000040, &00040000, &00005000
          DCD     &00000048, &00140000, &00005000
          DCD     &00000050, &00140000, &00001000
          DCD     &00000058, &00500000, &00001400
          DCD     &00000060, &00500000, &00000500
          DCD     &00000070, &01400000, &00000140
          DCD     &00000078, &05000000, &00000040
          DCD     &00000080, &05000000, &00000140
          DCD     &00000090, &40500000, &00000501
          DCD     &00000098, &54500000, &00000405
          DCD     &000000a0, &54140000, &00001415
          DCD     &000000a8, &55140000, &00001055
          DCD     &000000b0, &55040000, &00005055
          DCD     &000000b8, &54040000, &00005015
          DCD     &000000c0, &00150000, &00005000
          DCD     &000000c8, &55555000, &00055555
          DCD     &000000d0, &55555000, &00055555
          DCD     &000000d8, &00000000, &00000000
          DCD     -1
          ; frame 47
          DCD     &00000020, &55000000, &00055555
          DCD     &00000030, &55555000, &00005555
          DCD     &00000038, &00050000, &00001000
          DCD     &00000040, &00050000, &00001000
          DCD     &00000048, &00050000, &00001400
          DCD     &00000050, &00140000, &00001400
          DCD     &00000058, &00140000, &00000400
          DCD     &00000068, &00500000, &00000100
          DCD     &00000088, &01400000, &00000500
          DCD     &00000090, &41400000, &00000505
          DCD     &00000098, &50500000, &00001415
          DCD     &000000a0, &54500000, &00005055
          DCD     &000000a8, &54100000, &00005055
          DCD     &000000b0, &55140000, &00004055
          DCD     &000000b8, &54140000, &00004005
          DCD     &000000c0, &00140000, &00055550
          DCD     &000000c8, &55554000, &00155555
          DCD     &000000d0, &55554000, &00055555
          DCD     &000000d8, &00554000, &00000000
          DCD     -1
          ; frame 48
          DCD     &00000018, &00000000, &00005400
          DCD     &00000020, &50000000, &00015555
          DCD     &00000028, &55555000, &00005555
          DCD     &00000030, &55555400, &00001415
          DCD     &00000038, &00155400, &00001400
          DCD     &00000040, &00010000, &00001400
          DCD     &00000048, &00010000, &00001400
          DCD     &00000050, &00050000, &00000400
          DCD     &00000058, &00040000, &00000500
          DCD     &00000060, &00140000, &00000100
          DCD     &00000068, &00500000, &00000140
          DCD     &00000070, &01400000, &00000040
          DCD     &00000088, &01000000, &00000500
          DCD     &00000090, &41400000, &00001405
          DCD     &00000098, &51400000, &00005015
          DCD     &000000a0, &50500000, &00005055
          DCD     &000000a8, &54500000, &00014155
          DCD     &000000b0, &54100000, &00014155
          DCD     &000000b8, &50100000, &00054001
          DCD     &000000c0, &00100000, &00555554
          DCD     &000000c8, &55500000, &00155555
          DCD     &000000d0, &55550000, &00001555
          DCD     &000000d8, &15550000, &00000000
          DCD     -1
          ; frame 49
          DCD     &00000018, &00000000, &00005540
          DCD     &00000020, &50000000, &00005555
          DCD     &00000028, &55540000, &00000555
          DCD     &00000030, &55555400, &00000501
          DCD     &00000038, &01555500, &00000400
          DCD     &00000040, &00015400, &00000400
          DCD     &00000048, &00014000, &00000500
          DCD     &00000050, &00014000, &00000500
          DCD     &00000058, &00050000, &00000100
          DCD     &00000060, &00140000, &00000140
          DCD     &00000068, &00540000, &00000140
          DCD     &00000070, &00500000, &00000040
          DCD     &00000078, &01400000, &00000140
          DCD     &00000080, &05000000, &00000540
          DCD     &00000088, &05000000, &00001400
          DCD     &00000090, &41000000, &00005405
          DCD     &00000098, &41400000, &00005055
          DCD     &000000a0, &51400000, &00014155
          DCD     &000000a8, &50400000, &00010155
          DCD     &000000b0, &54500000, &00050155
          DCD     &000000b8, &50500000, &00555001
          DCD     &000000c0, &00500000, &00555550
          DCD     &000000c8, &55400000, &00055555
          DCD     &000000d0, &55500000, &00000155
          DCD     &000000d8, &55540000, &00000000
          DCD     &000000e0, &00540000, &00000000
          DCD     -1
          ; frame 50
          DCD     &00000010, &00000000, &00001400
          DCD     &00000018, &00000000, &00001554
          DCD     &00000020, &50000000, &00000555
          DCD     &00000028, &55500000, &00000155
          DCD     &00000030, &55554000, &00000100
          DCD     &00000038, &01555500, &00000500
          DCD     &00000040, &00055500, &00000500
          DCD     &00000048, &00005500, &00000100
          DCD     &00000050, &00004000, &00000100
          DCD     &00000058, &00014000, &00000140
          DCD     &00000060, &00050000, &00000140
          DCD     &00000068, &00140000, &00000040
          DCD     &00000070, &00500000, &00000050
          DCD     &00000080, &05000000, &00000500
          DCD     &00000090, &45000000, &00005015
          DCD     &00000098, &41000000, &00014055
          DCD     &000000a0, &41400000, &00050155
          DCD     &000000a8, &51400000, &00050555
          DCD     &000000b0, &51400000, &01550155
          DCD     &000000b8, &51400000, &01555405
          DCD     &000000c0, &01400000, &00155550
          DCD     &000000c8, &51400000, &00005555
          DCD     &000000d0, &55400000, &00000055
          DCD     &000000d8, &55500000, &00000001
          DCD     &000000e0, &05500000, &00000000
          DCD     -1
          ; frame 51
          DCD     &00000010, &00000000, &00000540
          DCD     &00000018, &00000000, &00000555
          DCD     &00000020, &50000000, &00000155
          DCD     &00000028, &55400000, &00000155
          DCD     &00000030, &55550000, &00000140
          DCD     &00000038, &01555400, &00000140
          DCD     &00000040, &00055540, &00000140
          DCD     &00000048, &00005540, &00000140
          DCD     &00000050, &00005000, &00000140
          DCD     &00000058, &00004000, &00000140
          DCD     &00000060, &00014000, &00000040
          DCD     &00000068, &00050000, &00000040
          DCD     &00000070, &00540000, &00000050
          DCD     &00000078, &01500000, &00000140
          DCD     &00000080, &05000000, &00001500
          DCD     &00000088, &05000000, &00005400
          DCD     &00000090, &05000000, &00014015
          DCD     &00000098, &45000000, &00050155
          DCD     &000000a0, &41000000, &00050555
          DCD     &000000a8, &41000000, &01540555
          DCD     &000000b0, &51000000, &01554155
          DCD     &000000b8, &41400000, &00555405
          DCD     &000000c0, &01000000, &00055550
          DCD     &000000c8, &41000000, &00001555
          DCD     &000000d0, &55000000, &00000055
          DCD     &000000d8, &55400000, &00000005
          DCD     &000000e0, &15500000, &00000000
          DCD     &000000e8, &00400000, &00000000
          DCD     -1
          ; frame 52
          DCD     &00000010, &00000000, &00000150
          DCD     &00000018, &00000000, &00000155
          DCD     &00000020, &54000000, &00000055
          DCD     &00000028, &55400000, &00000055
          DCD     &00000030, &15540000, &00000140
          DCD     &00000038, &01555000, &00000140
          DCD     &00000040, &00155500, &00000140
          DCD     &00000050, &00001540, &00000040
          DCD     &00000058, &00005000, &00000040
          DCD     &00000068, &00050000, &00000050
          DCD     &00000070, &00140000, &00000050
          DCD     &00000078, &01500000, &00000540
          DCD     &00000080, &05400000, &00001400
          DCD     &00000088, &05000000, &00015000
          DCD     &00000090, &05000000, &00054055
          DCD     &00000098, &45000000, &00050555
          DCD     &000000a0, &45000000, &00140555
          DCD     &000000a8, &45000000, &05540555
          DCD     &000000b0, &41000000, &01554055
          DCD     &000000b8, &41000000, &00155405
          DCD     &000000c0, &05000000, &00015550
          DCD     &000000c8, &05000000, &00001555
          DCD     &000000d0, &54000000, &00000055
          DCD     &000000d8, &55000000, &00000005
          DCD     &000000e0, &55400000, &00000000
          DCD     &000000e8, &01400000, &00000000
          DCD     -1
          ; frame 53
          DCD     &00000010, &00000000, &00000154
          DCD     &00000018, &40000000, &00000155
          DCD     &00000028, &55400000, &00000051
          DCD     &00000030, &15540000, &00000040
          DCD     &00000038, &01554000, &00000040
          DCD     &00000040, &00155400, &00000040
          DCD     &00000048, &00015540, &00000040
          DCD     &00000060, &00005000, &00000050
          DCD     &00000068, &00054000, &00000050
          DCD     &00000070, &00150000, &00000150
          DCD     &00000078, &00500000, &00000540
          DCD     &00000080, &05400000, &00005400
          DCD     &00000088, &05000000, &00015004
          DCD     &00000090, &05000000, &00050055
          DCD     &00000098, &45000000, &00140555
          DCD     &000000a0, &45000000, &05540555
          DCD     &000000b0, &45000000, &01554055
          DCD     &000000b8, &45000000, &00155405
          DCD     &000000c8, &04000000, &00001555
          DCD     &000000d8, &54000000, &00000005
          DCD     &000000e0, &55000000, &00000000
          DCD     &000000e8, &05000000, &00000000
          DCD     -1
          ; frame 54
          DCD     &00000008, &00000000, &00000040
          DCD     &00000018, &40000000, &00000055
          DCD     &00000020, &54000000, &00000015
          DCD     &00000030, &15540000, &00000050
          DCD     &00000058, &00001540, &00000050
          DCD     &00000068, &00014000, &00000050
          DCD     &00000078, &00540000, &00000540
          DCD     &00000088, &05000000, &00014004
          DCD     &00000090, &04000000, &00050155
          DCD     &00000098, &05000000, &00140555
          DCD     &000000a0, &45000000, &05541555
          DCD     &000000a8, &45000000, &05550555
          DCD     &000000b0, &45000000, &00555055
          DCD     &000000b8, &05000000, &00055505
          DCD     &000000c0, &05000000, &00005540
          DCD     &000000c8, &04000000, &00000554
          DCD     &000000d0, &54000000, &00000155
          DCD     &000000d8, &54000000, &00000015
          DCD     &000000e0, &55000000, &00000001
          DCD     &000000e8, &15000000, &00000000
          DCD     -1
          ; frame 55
          DCD     &00000038, &01554000, &00000050
          DCD     &00000050, &00001540, &00000050
          DCD     &00000078, &00540000, &00001540
          DCD     &00000098, &04000000, &00140555
          DCD     &000000c0, &04000000, &00005540
          DCD     &000000c8, &14000000, &00000554
          DCD     -1
          ; frame 56
          DCD     &00000038, &01554000, &00000040
          DCD     &00000050, &00001540, &00000040
          DCD     &00000078, &00540000, &00000540
          DCD     &00000090, &04000000, &00050055
          DCD     &00000098, &45000000, &00140555
          DCD     &000000a0, &45000000, &05540555
          DCD     &000000b8, &45000000, &00055405
          DCD     &000000c0, &05000000, &00005540
          DCD     &000000c8, &04000000, &00000554
          DCD     -1
          ; frame 57
          DCD     &00000008, &00000000, &00000000
          DCD     &00000010, &00000000, &00000150
          DCD     &00000018, &40000000, &00000155
          DCD     &00000020, &54000000, &00000055
          DCD     &00000030, &15540000, &00000040
          DCD     &00000058, &00005000, &00000040
          DCD     &00000060, &00015000, &00000050
          DCD     &00000068, &00054000, &00000050
          DCD     &00000078, &01500000, &00000540
          DCD     &00000088, &05000000, &00015005
          DCD     &00000090, &05000000, &00054055
          DCD     &00000098, &45000000, &00040555
          DCD     &000000a0, &45000000, &01540555
          DCD     &000000a8, &45000000, &05540555
          DCD     &000000b0, &45000000, &01554055
          DCD     &000000b8, &45000000, &00155405
          DCD     &000000c0, &05000000, &00015550
          DCD     &000000c8, &05000000, &00001555
          DCD     &000000d0, &54000000, &00000055
          DCD     &000000d8, &55000000, &00000005
          DCD     &000000e0, &55400000, &00000000
          DCD     &000000e8, &05000000, &00000000
          DCD     -1
          ; frame 58
          DCD     &00000010, &00000000, &00000540
          DCD     &00000018, &00000000, &00000555
          DCD     &00000020, &54000000, &00000155
          DCD     &00000028, &55400000, &00000055
          DCD     &00000030, &55550000, &00000140
          DCD     &00000038, &01555000, &00000140
          DCD     &00000040, &00155500, &00000140
          DCD     &00000048, &00005540, &00000140
          DCD     &00000050, &00005100, &00000140
          DCD     &00000060, &00014000, &00000040
          DCD     &00000068, &00050000, &00000050
          DCD     &00000070, &00540000, &00000050
          DCD     &00000080, &05000000, &00001500
          DCD     &00000088, &05000000, &00005001
          DCD     &00000090, &45000000, &00014015
          DCD     &00000098, &45000000, &00050155
          DCD     &000000a0, &41000000, &00040555
          DCD     &000000a8, &41000000, &01540555
          DCD     &000000b0, &51000000, &01554155
          DCD     &000000b8, &41000000, &00555405
          DCD     &000000c0, &01000000, &00015550
          DCD     &000000d0, &55000000, &00000055
          DCD     &000000d8, &55400000, &00000005
          DCD     &000000e0, &15400000, &00000000
          DCD     &000000e8, &01400000, &00000000
          DCD     -1
          ; frame 59
          DCD     &00000010, &00000000, &00001500
          DCD     &00000018, &00000000, &00001554
          DCD     &00000020, &50000000, &00000555
          DCD     &00000028, &55500000, &00000155
          DCD     &00000030, &55554000, &00000100
          DCD     &00000038, &01555500, &00000500
          DCD     &00000040, &00055500, &00000500
          DCD     &00000048, &00005500, &00000100
          DCD     &00000050, &00004000, &00000100
          DCD     &00000058, &00014000, &00000140
          DCD     &00000060, &00050000, &00000140
          DCD     &00000068, &00140000, &00000040
          DCD     &00000070, &00500000, &00000050
          DCD     &00000078, &01400000, &00000140
          DCD     &00000080, &05000000, &00000500
          DCD     &00000088, &05000000, &00001401
          DCD     &00000090, &45000000, &00005015
          DCD     &00000098, &41000000, &00014055
          DCD     &000000a0, &51400000, &00050155
          DCD     &000000a8, &51400000, &00050555
          DCD     &000000b0, &51400000, &01550155
          DCD     &000000b8, &51400000, &01555405
          DCD     &000000c0, &01400000, &00155550
          DCD     &000000c8, &51400000, &00005555
          DCD     &000000d0, &55400000, &00000055
          DCD     &000000d8, &55500000, &00000001
          DCD     &000000e0, &05500000, &00000000
          DCD     &000000e8, &00000000, &00000000
          DCD     -1
          ; frame 60
          DCD     &00000010, &00000000, &00000000
          DCD     &00000018, &00000000, &00005540
          DCD     &00000020, &50000000, &00005555
          DCD     &00000028, &55550000, &00001555
          DCD     &00000030, &55555400, &00000405
          DCD     &00000038, &00555400, &00000400
          DCD     &00000040, &00014000, &00000400
          DCD     &00000048, &00014000, &00000400
          DCD     &00000050, &00010000, &00000500
          DCD     &00000058, &00050000, &00000500
          DCD     &00000060, &00140000, &00000140
          DCD     &00000068, &00500000, &00000140
          DCD     &00000070, &01500000, &00000040
          DCD     &00000078, &05400000, &00000140
          DCD     &00000080, &05000000, &00000540
          DCD     &00000088, &45000000, &00000501
          DCD     &00000090, &41400000, &00001405
          DCD     &00000098, &51400000, &00005015
          DCD     &000000a0, &50400000, &00014055
          DCD     &000000a8, &54500000, &00014155
          DCD     &000000b0, &54500000, &00010155
          DCD     &000000b8, &50500000, &00554001
          DCD     &000000c0, &00500000, &00555554
          DCD     &000000c8, &55500000, &00155555
          DCD     &000000d0, &55540000, &00000155
          DCD     &000000d8, &55550000, &00000000
          DCD     &000000e0, &00140000, &00000000
          DCD     -1
          ; frame 61
          DCD     &00000018, &00000000, &00000000
          DCD     &00000020, &55400000, &00055555
          DCD     &00000028, &55555000, &00055555
          DCD     &00000030, &55555000, &00005555
          DCD     &00000038, &00050000, &00005000
          DCD     &00000040, &00050000, &00005000
          DCD     &00000048, &00050000, &00001000
          DCD     &00000050, &00140000, &00001400
          DCD     &00000058, &00140000, &00000400
          DCD     &00000060, &00500000, &00000500
          DCD     &00000068, &00400000, &00000100
          DCD     &00000070, &01400000, &00000140
          DCD     &00000078, &05000000, &00000040
          DCD     &00000080, &05000000, &00000140
          DCD     &00000088, &41400000, &00000500
          DCD     &00000090, &51400000, &00000505
          DCD     &00000098, &54500000, &00001405
          DCD     &000000a0, &54500000, &00001015
          DCD     &000000a8, &55140000, &00005055
          DCD     &000000b0, &55140000, &00004055
          DCD     &000000b8, &54140000, &00004015
          DCD     &000000c0, &00140000, &00055550
          DCD     &000000c8, &55554000, &00155555
          DCD     &000000d0, &55554000, &00055555
          DCD     &000000d8, &00154000, &00000000
          DCD     &000000e0, &00000000, &00000000
          DCD     -1
          ; frame 62
          DCD     &00000018, &00150000, &00000000
          DCD     &00000020, &55550000, &00000015
          DCD     &00000028, &55550000, &00155555
          DCD     &00000030, &50500000, &00155555
          DCD     &00000038, &00100000, &00155000
          DCD     &00000040, &00100000, &00014000
          DCD     &00000048, &00500000, &00014000
          DCD     &00000050, &00500000, &00004000
          DCD     &00000058, &00400000, &00005000
          DCD     &00000060, &01400000, &00001400
          DCD     &00000068, &01400000, &00000500
          DCD     &00000070, &05000000, &00000500
          DCD     &00000078, &05000000, &00000140
          DCD     &00000080, &01400000, &00000040
          DCD     &00000088, &50500000, &00000140
          DCD     &00000090, &54500000, &00000101
          DCD     &00000098, &55140000, &00000505
          DCD     &000000a0, &55050000, &00000505
          DCD     &000000a8, &55450000, &00001415
          DCD     &000000b0, &55010000, &00001415
          DCD     &000000b8, &40014000, &00001405
          DCD     &000000c0, &15555400, &00001400
          DCD     &000000c8, &55555400, &00001555
          DCD     &000000d0, &55540000, &00015555
          DCD     &000000d8, &00000000, &00015550
          DCD     -1
          ; frame 63
          DCD     &00000010, &05500000, &00000000
          DCD     &00000018, &55500000, &00000000
          DCD     &00000020, &55000000, &00000015
          DCD     &00000028, &55000000, &00000555
          DCD     &00000030, &01000000, &00005554
          DCD     &00000038, &01400000, &00155540
          DCD     &00000040, &01000000, &01555000
          DCD     &00000048, &01000000, &01540000
          DCD     &00000050, &01000000, &00040000
          DCD     &00000058, &05000000, &00050000
          DCD     &00000060, &05000000, &00014000
          DCD     &00000068, &05000000, &00005000
          DCD     &00000070, &05000000, &00001400
          DCD     &00000078, &01400000, &00000540
          DCD     &00000080, &00500000, &00000150
          DCD     &00000088, &54140000, &00000050
          DCD     &00000090, &55050000, &00000040
          DCD     &00000098, &55414000, &00000041
          DCD     &000000a0, &55505000, &00000141
          DCD     &000000a8, &55505500, &00000141
          DCD     &000000b0, &55015540, &00000141
          DCD     &000000b8, &40555500, &00000141
          DCD     &000000c0, &05554000, &00000140
          DCD     &000000c8, &55540000, &00000141
          DCD     &000000d0, &55000000, &00000155
          DCD     &000000d8, &40000000, &00000555
          DCD     &000000e0, &00000000, &00000550
          DCD     &000000e8, &00000000, &00000100
          DCD     -1
          ; frame 64
          DCD     &00000008, &40000000, &00000001
          DCD     &00000010, &40000000, &00000005
          DCD     &00000018, &40000000, &00000015
          DCD     &00000020, &40000000, &00000155
          DCD     &00000028, &40000000, &00000551
          DCD     &00000030, &50000000, &00001540
          DCD     &00000038, &50000000, &00005500
          DCD     &00000040, &10000000, &00055400
          DCD     &00000048, &10000000, &00154000
          DCD     &00000050, &14000000, &00550000
          DCD     &00000058, &14000000, &01540000
          DCD     &00000060, &14000000, &05500000
          DCD     &00000068, &15000000, &15500000
          DCD     &00000070, &05540000, &00140000
          DCD     &00000078, &00154000, &00055000
          DCD     &00000080, &15015000, &00005540
          DCD     &00000088, &55501450, &00000150
          DCD     &00000090, &55540550, &00000010
          DCD     &00000098, &55541540, &00000010
          DCD     &000000a0, &55505500, &00000010
          DCD     &000000a8, &15415400, &00000014
          DCD     &000000b0, &15155000, &00000014
          DCD     &000000b8, &00550000, &00000014
          DCD     &000000c0, &01540000, &00000004
          DCD     &000000c8, &05500000, &00000005
          DCD     &000000d0, &55400000, &00000001
          DCD     &000000d8, &54000000, &00000001
          DCD     &000000e0, &50000000, &00000005
          DCD     &000000e8, &40000000, &00000005
          DCD     -1
          ; frame 65
          DCD     &00000008, &00000000, &00000000
          DCD     &00000010, &00000000, &00000500
          DCD     &00000018, &00000000, &00001500
          DCD     &00000020, &00000000, &00001500
          DCD     &00000028, &00000000, &00005540
          DCD     &00000030, &00000000, &00005450
          DCD     &00000038, &00000000, &00015014
          DCD     &00000040, &00000000, &00015005
          DCD     &00000048, &00000000, &00054005
          DCD     &00000050, &40000000, &00054001
          DCD     &00000058, &40000000, &00150000
          DCD     &00000060, &55554050, &00540000
          DCD     &00000068, &15555550, &00540000
          DCD     &00000070, &00000550, &01500000
          DCD     &00000078, &05540540, &01500000
          DCD     &00000080, &15551540, &05400000
          DCD     &00000088, &15551500, &05540000
          DCD     &00000090, &15545400, &15155554
          DCD     &00000098, &05545400, &04000005
          DCD     &000000a0, &05515000, &00000005
          DCD     &000000a8, &41415000, &00000001
          DCD     &000000b0, &40054000, &00000000
          DCD     &000000b8, &50154000, &00000000
          DCD     &000000c0, &14150000, &00000000
          DCD     &000000c8, &05540000, &00000000
          DCD     &000000d0, &01540000, &00000000
          DCD     &000000d8, &01500000, &00000000
          DCD     &000000e0, &01500000, &00000000
          DCD     &000000e8, &00400000, &00000000
          DCD     -1
          ; frame 66
          DCD     &00000010, &00000000, &00000000
          DCD     &00000018, &00000000, &00000000
          DCD     &00000020, &00000000, &00000000
          DCD     &00000028, &00000000, &00140000
          DCD     &00000030, &00000000, &00150000
          DCD     &00000038, &00000500, &00154000
          DCD     &00000040, &00001500, &00155500
          DCD     &00000048, &00155500, &00140540
          DCD     &00000050, &01545500, &00140054
          DCD     &00000058, &55001500, &00140015
          DCD     &00000060, &50141500, &00140001
          DCD     &00000068, &01551500, &00540000
          DCD     &00000070, &05551400, &00540000
          DCD     &00000078, &15551400, &00540000
          DCD     &00000080, &15541400, &00540000
          DCD     &00000088, &05545400, &00540000
          DCD     &00000090, &01545400, &00540005
          DCD     &00000098, &50545400, &00500055
          DCD     &000000a0, &54005400, &00540550
          DCD     &000000a8, &05005400, &00555500
          DCD     &000000b0, &01555400, &00554000
          DCD     &000000b8, &00155400, &00500000
          DCD     &000000c0, &00005000, &00400000
          DCD     &000000c8, &00005000, &00000000
          DCD     &000000d0, &00001000, &00000000
          DCD     &000000d8, &00000000, &00000000
          DCD     &000000e0, &00000000, &00000000
          DCD     &000000e8, &00000000, &00000000
          DCD     -1
          ; frame 67
          DCD     &00000018, &00150000, &00000000
          DCD     &00000020, &00150000, &00000000
          DCD     &00000028, &00150000, &00000000
          DCD     &00000030, &01554000, &00000000
          DCD     &00000038, &05454000, &00000000
          DCD     &00000040, &14014000, &00000000
          DCD     &00000048, &50015000, &00000000
          DCD     &00000050, &50515000, &05000000
          DCD     &00000058, &41505000, &05555541
          DCD     &00000060, &05545400, &05541555
          DCD     &00000068, &15545400, &01500004
          DCD     &00000070, &15551500, &01500000
          DCD     &00000078, &15551500, &01500000
          DCD     &00000080, &05551500, &00540000
          DCD     &00000088, &00000540, &00540000
          DCD     &00000090, &55000540, &00140000
          DCD     &00000098, &55555540, &00150001
          DCD     &000000a0, &00054150, &00150005
          DCD     &000000a8, &00000040, &00050014
          DCD     &000000b0, &00000000, &00054054
          DCD     &000000b8, &00000000, &00054150
          DCD     &000000c0, &00000000, &00015540
          DCD     &000000c8, &00000000, &00015400
          DCD     &000000d0, &00000000, &00015000
          DCD     &000000d8, &00000000, &00005000
          DCD     -1
          ; frame 68
          DCD     &00000008, &50000000, &00000000
          DCD     &00000010, &54000000, &00000000
          DCD     &00000018, &15000000, &00000000
          DCD     &00000020, &55400000, &00000000
          DCD     &00000028, &55500000, &00000000
          DCD     &00000030, &41540000, &00000001
          DCD     &00000038, &00550000, &00000005
          DCD     &00000040, &04154000, &00000005
          DCD     &00000048, &15455000, &00000004
          DCD     &00000050, &15515400, &00000004
          DCD     &00000058, &55545500, &00000014
          DCD     &00000060, &55541540, &00000014
          DCD     &00000068, &55540550, &00000550
          DCD     &00000070, &15500550, &00055500
          DCD     &00000078, &00005450, &14150000
          DCD     &00000080, &00155000, &15500000
          DCD     &00000088, &15540000, &05400000
          DCD     &00000090, &14000000, &01500000
          DCD     &00000098, &10000000, &01540000
          DCD     &000000a0, &50000000, &00550000
          DCD     &000000a8, &50000000, &00154000
          DCD     &000000b0, &40000000, &00055000
          DCD     &000000b8, &40000000, &00015401
          DCD     &000000c0, &40000000, &00005501
          DCD     &000000c8, &00000000, &00001545
          DCD     &000000d0, &00000000, &00000554
          DCD     &000000d8, &00000000, &00000154
          DCD     &000000e0, &00000000, &00000054
          DCD     &000000e8, &00000000, &00000015
          DCD     -1
          ; frame 69
          DCD     &00000008, &00000000, &00000000
          DCD     &00000010, &00000000, &00000150
          DCD     &00000018, &40000000, &00000155
          DCD     &00000020, &54000000, &00000055
          DCD     &00000028, &55400000, &00000055
          DCD     &00000030, &15540000, &00000040
          DCD     &00000038, &01555000, &00000140
          DCD     &00000040, &54155500, &00000141
          DCD     &00000048, &55415540, &00000145
          DCD     &00000050, &55501540, &00000041
          DCD     &00000058, &55505000, &00000041
          DCD     &00000060, &55414000, &00000041
          DCD     &00000068, &55054000, &00000051
          DCD     &00000070, &10140000, &00000150
          DCD     &00000078, &01500000, &00000540
          DCD     &00000080, &05400000, &00001400
          DCD     &00000088, &04000000, &00015000
          DCD     &00000090, &04000000, &00054000
          DCD     &00000098, &05000000, &00050000
          DCD     &000000a0, &05000000, &01140000
          DCD     &000000a8, &05000000, &05540000
          DCD     &000000b0, &05000000, &01554000
          DCD     &000000b8, &05000000, &00155400
          DCD     &000000c0, &05000000, &00015550
          DCD     &000000c8, &05000000, &00001555
          DCD     &000000d0, &54000000, &00000055
          DCD     &000000d8, &55000000, &00000005
          DCD     &000000e0, &55400000, &00000000
          DCD     &000000e8, &05000000, &00000000
          DCD     -1
          ; frame 70
          DCD     &00000010, &00000000, &00000000
          DCD     &00000018, &00000000, &00004000
          DCD     &00000020, &54000000, &00015555
          DCD     &00000028, &55555000, &00015555
          DCD     &00000030, &55555400, &00001455
          DCD     &00000038, &00054000, &00001000
          DCD     &00000040, &54050000, &00001015
          DCD     &00000048, &55050000, &00001455
          DCD     &00000050, &55050000, &00001415
          DCD     &00000058, &54140000, &00000515
          DCD     &00000060, &54500000, &00000505
          DCD     &00000068, &50500000, &00000145
          DCD     &00000070, &01400000, &00000140
          DCD     &00000078, &05000000, &00000140
          DCD     &00000080, &05000000, &00000140
          DCD     &00000088, &01000000, &00000500
          DCD     &00000090, &01400000, &00001400
          DCD     &00000098, &00400000, &00001400
          DCD     &000000a0, &00500000, &00005000
          DCD     &000000a8, &00100000, &00004000
          DCD     &000000b0, &00140000, &00014000
          DCD     &000000b8, &00140000, &00014000
          DCD     &000000c0, &00140000, &00155554
          DCD     &000000c8, &55550000, &00155555
          DCD     &000000d0, &55554000, &00005555
          DCD     &000000d8, &05550000, &00000000
          DCD     &000000e0, &00000000, &00000000
          DCD     &000000e8, &00000000, &00000000
          DCD     -1
          ; frame 71
          DCD     &00000018, &00550000, &00000000
          DCD     &00000020, &55550000, &00000015
          DCD     &00000028, &55540000, &00055555
          DCD     &00000030, &50500000, &00555555
          DCD     &00000038, &00100000, &00155400
          DCD     &00000040, &50100000, &00014055
          DCD     &00000048, &50500000, &00014155
          DCD     &00000050, &50500000, &00014155
          DCD     &00000058, &50400000, &00005055
          DCD     &00000060, &51400000, &00001455
          DCD     &00000068, &41000000, &00001415
          DCD     &00000070, &05000000, &00000500
          DCD     &00000080, &01400000, &00000040
          DCD     &00000088, &00500000, &00000140
          DCD     &00000090, &00500000, &00000100
          DCD     &00000098, &00140000, &00000500
          DCD     &000000a0, &00050000, &00000500
          DCD     &000000a8, &00050000, &00000400
          DCD     &000000b0, &00010000, &00001400
          DCD     &000000b8, &00015000, &00001400
          DCD     &000000c0, &15555400, &00001400
          DCD     &000000c8, &55555400, &00001555
          DCD     &000000d0, &55500000, &00015555
          DCD     &000000d8, &00000000, &00015550
          DCD     -1
          ; frame 72
          DCD     &00000018, &15540000, &00000000
          DCD     &00000020, &55540000, &00000015
          DCD     &00000028, &55400000, &00001555
          DCD     &00000030, &00400000, &00155555
          DCD     &00000038, &00500000, &00555500
          DCD     &00000040, &40400000, &00550055
          DCD     &00000048, &50400000, &00050555
          DCD     &00000050, &51400000, &00010555
          DCD     &00000058, &51400000, &00014155
          DCD     &00000060, &41000000, &00005055
          DCD     &00000068, &45000000, &00001415
          DCD     &00000080, &01400000, &00000140
          DCD     &00000090, &00140000, &00000140
          DCD     &00000098, &00050000, &00000100
          DCD     &000000a0, &00014000, &00000100
          DCD     &000000a8, &00014000, &00000500
          DCD     &000000b0, &00014000, &00000500
          DCD     &000000b8, &00155500, &00000400
          DCD     &000000c0, &15555400, &00000500
          DCD     &000000c8, &55550000, &00000515
          DCD     &000000d0, &55000000, &00001555
          DCD     &000000d8, &00000000, &00005555
          DCD     &000000e0, &00000000, &00001400
          DCD     -1
          ; frame 73
          DCD     &00000018, &05540000, &00000000
          DCD     &00000028, &55500000, &00005555
          DCD     &00000030, &40500000, &00555555
          DCD     &00000038, &40500000, &00555500
          DCD     &00000040, &50500000, &00550055
          DCD     &00000048, &50400000, &00010555
          DCD     &00000050, &50400000, &00014555
          DCD     &00000060, &41400000, &00005055
          DCD     &00000080, &01400000, &00000040
          DCD     &000000a0, &00050000, &00000500
          DCD     &000000b0, &00014000, &00000400
          DCD     &000000b8, &00055500, &00000400
          DCD     &000000c0, &15555400, &00000400
          DCD     &000000c8, &55554000, &00000555
          DCD     &000000d8, &00000000, &00005554
          DCD     &000000e0, &00000000, &00005400
          DCD     -1
          ; frame 74
          DCD     &00000018, &01550000, &00000000
          DCD     &00000020, &55550000, &00000015
          DCD     &00000028, &55500000, &00015555
          DCD     &00000030, &50500000, &00555555
          DCD     &00000038, &10500000, &00555400
          DCD     &00000040, &50500000, &00010155
          DCD     &00000048, &50500000, &00014555
          DCD     &00000050, &50400000, &00014155
          DCD     &00000058, &51400000, &00005155
          DCD     &00000068, &41000000, &00001415
          DCD     &00000098, &00140000, &00000500
          DCD     &000000a8, &00010000, &00000400
          DCD     &000000b8, &00015400, &00001400
          DCD     &000000c0, &15555400, &00001400
          DCD     &000000c8, &55555000, &00001555
          DCD     &000000d0, &55400000, &00005555
          DCD     &000000e0, &00000000, &00000000
          DCD     -1
          ; frame 75
          DCD     &00000018, &00150000, &00000000
          DCD     &00000028, &55550000, &00155555
          DCD     &00000030, &54500000, &00555555
          DCD     &00000038, &04100000, &00155000
          DCD     &00000040, &54100000, &00014155
          DCD     &00000048, &50500000, &00014155
          DCD     &00000050, &50500000, &00004155
          DCD     &00000058, &50400000, &00005155
          DCD     &00000060, &51400000, &00001455
          DCD     &00000068, &41000000, &00000515
          DCD     &00000080, &01400000, &00000140
          DCD     &00000088, &01500000, &00000140
          DCD     &00000090, &00500000, &00000100
          DCD     &000000a8, &00050000, &00001400
          DCD     &000000b0, &00010000, &00001400
          DCD     &000000b8, &00014000, &00001400
          DCD     &000000c8, &55555400, &00001555
          DCD     &000000d0, &55500000, &00015555
          DCD     &000000d8, &00000000, &00015550
          DCD     -1
          ; frame 76
          DCD     &00000018, &00000000, &00000000
          DCD     &00000020, &55554000, &00000055
          DCD     &00000028, &55554000, &00155555
          DCD     &00000030, &55540000, &00155555
          DCD     &00000038, &04140000, &00014000
          DCD     &00000040, &45140000, &00014155
          DCD     &00000048, &50100000, &00004155
          DCD     &00000050, &50500000, &00005155
          DCD     &00000058, &50500000, &00001055
          DCD     &00000068, &41400000, &00000515
          DCD     &00000070, &05000000, &00000100
          DCD     &00000080, &05000000, &00000140
          DCD     &00000088, &01400000, &00000140
          DCD     &00000090, &00500000, &00000500
          DCD     &000000a0, &00140000, &00000400
          DCD     &000000b0, &00050000, &00001000
          DCD     &000000b8, &00050000, &00001000
          DCD     &000000c0, &15555000, &00001000
          DCD     &000000c8, &55555000, &00015555
          DCD     &000000d0, &55554000, &00015555
          DCD     &000000d8, &00000000, &00015500
          DCD     -1
          ; frame 77
          DCD     &00000020, &55554000, &00005555
          DCD     &00000030, &55540000, &00055555
          DCD     &00000038, &00140000, &00005000
          DCD     &00000040, &45140000, &00004155
          DCD     &00000048, &50140000, &00005155
          DCD     &00000050, &50100000, &00005155
          DCD     &00000058, &50500000, &00001455
          DCD     &00000060, &50400000, &00001415
          DCD     &00000070, &45000000, &00000145
          DCD     &00000098, &00500000, &00000400
          DCD     &000000a0, &00140000, &00001400
          DCD     &000000a8, &00040000, &00001400
          DCD     &000000b8, &00050000, &00005000
          DCD     &000000c0, &05554000, &00005000
          DCD     &000000c8, &55555000, &00055555
          DCD     &000000d0, &55555000, &00055555
          DCD     &000000d8, &00000000, &00010000
          DCD     -1

; Offsets into the deltas for each frame
frame_deltas
          DCD     0  ; frame 0
          DCD     388  ; frame 1
          DCD     572  ; frame 2
          DCD     744  ; frame 3
          DCD     904  ; frame 4
          DCD     1088  ; frame 5
          DCD     1248  ; frame 6
          DCD     1432  ; frame 7
          DCD     1556  ; frame 8
          DCD     1584  ; frame 9
          DCD     1648  ; frame 10
          DCD     1652  ; frame 11
          DCD     1692  ; frame 12
          DCD     1696  ; frame 13
          DCD     1760  ; frame 14
          DCD     1788  ; frame 15
          DCD     1840  ; frame 16
          DCD     1892  ; frame 17
          DCD     1944  ; frame 18
          DCD     2008  ; frame 19
          DCD     2072  ; frame 20
          DCD     2124  ; frame 21
          DCD     2188  ; frame 22
          DCD     2228  ; frame 23
          DCD     2256  ; frame 24
          DCD     2344  ; frame 25
          DCD     2348  ; frame 26
          DCD     2352  ; frame 27
          DCD     2356  ; frame 28
          DCD     2360  ; frame 29
          DCD     2364  ; frame 30
          DCD     2368  ; frame 31
          DCD     2372  ; frame 32
          DCD     2376  ; frame 33
          DCD     2380  ; frame 34
          DCD     2384  ; frame 35
          DCD     2388  ; frame 36
          DCD     2392  ; frame 37
          DCD     2396  ; frame 38
          DCD     2400  ; frame 39
          DCD     2404  ; frame 40
          DCD     2408  ; frame 41
          DCD     2412  ; frame 42
          DCD     2416  ; frame 43
          DCD     2684  ; frame 44
          DCD     2808  ; frame 45
          DCD     3040  ; frame 46
          DCD     3308  ; frame 47
          DCD     3540  ; frame 48
          DCD     3820  ; frame 49
          DCD     4136  ; frame 50
          DCD     4440  ; frame 51
          DCD     4780  ; frame 52
          DCD     5096  ; frame 53
          DCD     5364  ; frame 54
          DCD     5608  ; frame 55
          DCD     5684  ; frame 56
          DCD     5796  ; frame 57
          DCD     6064  ; frame 58
          DCD     6368  ; frame 59
          DCD     6708  ; frame 60
          DCD     7036  ; frame 61
          DCD     7352  ; frame 62
          DCD     7656  ; frame 63
          DCD     7996  ; frame 64
          DCD     8348  ; frame 65
          DCD     8700  ; frame 66
          DCD     9040  ; frame 67
          DCD     9344  ; frame 68
          DCD     9696  ; frame 69
          DCD     10048  ; frame 70
          DCD     10388  ; frame 71
          DCD     10680  ; frame 72
          DCD     10960  ; frame 73
          DCD     11156  ; frame 74
          DCD     11364  ; frame 75
          DCD     11596  ; frame 76
          DCD     11852  ; frame 77

; Palette data
          = "PALD" ; marker string for the palette data
          DCD     1
palette
          DCB     0, 255, 255, 0
          ALIGN

; Read the period between frames
; <=  R0 = cs between frames
hourglass_getframeperiod SIGNATURE
          EXPORT  hourglass_getframeperiod
          MOV     x0, #period
          RET


; Read the size of the workspace block
; <=  R0 = size of hourglass workspace
hourglass_getwssize SIGNATURE
          EXPORT  hourglass_getwssize
          MOV     x0, #hg_workspacesize
          RET

; Initialisation function
; =>  R0 = hourglass workspace
hourglass_init SIGNATURE
          EXPORT  hourglass_init
          MOV     x12, x0
          MOV     x0, #0
          STR     w0, hg_framenum
          STR     w0, hg_percentage
          STR     w0, hg_leds
          LDR     w0, wordblock_0
          STR     w0, hg_word
          MOV     w0, #-1
          STR     w0, hg_oldpointer
          LDR     w0, wordblock_4
          ADR     x1, hg_currentdata
          LSL     w2, w1, #16                 ; move lower hard of word into the upper half
          ORR     w0, w0, w2                  ; assign the low half word of pointer data
          STR     w0, hg_word + 4
          LSR     w0, w1, #16                 ; and the high half word
          STR     w0, hg_word + 8
          ADR     x1, palette                 ; get the built in palette
          ADR     x2, hg_defcolours           ; where to store default colours
          ADR     x3, hg_curcolours           ; where to store current colours
          LDP     w0, w4, [x1], #8            ; read first 2 colours
          LDR     w5, [x1]                    ; read 3rd colours
          STP     w0, w4, [x2], #8            ; store first 2 colours as default
          STR     w5, [x2]                    ; store 3rd colour as default
          STP     w0, w4, [x3], #8            ; store first 2 colours as current
          STR     w5, [x3]                    ; store 3rd colour as current
; no need to initialise the currentdata; it will be updated by the first frame
          RET

hourglass_reset_defcolours SIGNATURE
          MOV     x12, x0
          ADR     x1, palette                 ; get the built in palette
          ADR     x2, hg_defcolours           ; where to store default colours
          ADR     x3, hg_curcolours           ; where to store current colours
          LDP     w0, w4, [x1], #8            ; read first 2 colours
          LDR     w5, [x1]                    ; read 3rd colours
          STP     w0, w4, [x2], #8            ; store first 2 colours as default
          STR     w5, [x2]                    ; store 3rd colour as default
          STP     w0, w4, [x3], #8            ; store first 2 colours as current
          STR     w5, [x3]                    ; store 3rd colour as current
          RET

hourglass_reset_curcolours SIGNATURE
          MOV     x12, x0
          ADR     x1, hg_defcolours           ; get the default colours
          ADR     x3, hg_curcolours           ; where to store current colours
          LDP     w0, w4, [x1], #8            ; read first 2 colours
          LDR     w5, [x1]                    ; read 3rd colours
          STP     w0, w4, [x3], #8            ; store first 2 colours as default
          STR     w5, [x3]                    ; store 3rd colour as default
          STP     w0, w4, [x3], #8            ; store first 2 colours as current
          STR     w5, [x3]                    ; store 3rd colour as current
          RET

wordblock_0
          DCB     0                           ; define pointer shape
          DCB     3                           ; shape number (will toggle 3-4)
          DCB     (width*2+7)/8               ; width in bytes
          DCB     height                      ; height
wordblock_4
          DCB     active_x                    ; active x offset
          DCB     active_y                    ; active y offset
          DCB     0                           ; b0-7 of the address of the pointer data
          DCB     0                           ; b8-15 of address of the pointer data

; Start the hourglass
; =>  R0 = hourglass workspace
hourglass_start SIGNATURE
          EXPORT  hourglass_start
          STP     x29, x30, [sp, #-16]!
          MOV     x29, sp
          SUB     sp, sp, #16
          MOV     x12, x0
          MOV     x0, #0
          STR     w0, hg_framenum
          MOV     x0, #1
          MOV     x1, #25                     ; read pointer colour 1
          SWI     XOS_ReadPalette
          BVC     %FT10
          LDR     w2, =&81397900              ; purple if it wasn't set
10
          STR     w2, hg_oldcolours + (4 * 0)
          MOV     x0, #2
          MOV     x1, #25                     ; read pointer colour 2
          SWI     XOS_ReadPalette
          BVC     %FT20
          LDR     w2, =&66FFFF00              ; yellow if it wasn't set
20
          STR     w2, hg_oldcolours + (4 * 1)
          MOV     x0, #3
          MOV     x1, #25                     ; read pointer colour 3
          SWI     XOS_ReadPalette
          BVC     %FT30
          LDR     w2, =&00000000              ; black if it wasn't set
30
          STR     w2, hg_oldcolours + (4 * 2)
; now set the palette up for our hourglass
          MOV     x1, sp
          ADR     x2, hg_curcolours
; colour 1
          MOV     x0, #1
          STRB    w0, [x1, #0]
          MOV     w0, #25                     ; set pointer colour
          STRB    w0, [x1, #1]
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #2]                ; red
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #3]                ; green
          LDRB    w0, [x2], #2                ; skip the 0 on the end of the word
          STRB    w0, [x1, #4]                ; blue
          MOV     w0, #12
          SWI     XOS_Word                    ; Set palette
          MOV     x1, #127                        ; invalid pointer number to read the pointer
          MOV     x0, #106                        ; select pointer
          SWI     XOS_Byte
          BVC     %FT10
          MOV     x1, #0                          ; if there was an error, turn off
10
          STR     w1, hg_oldpointer
          ADD     sp, sp, #16
          LDP     x29, x30, [sp], #16
          MOV     x0, x12
          B       hourglass_frame                 ; exit via the first frame

; Stop the hourglass
; =>  R0 = hourglass workspace
hourglass_stop SIGNATURE
          EXPORT  hourglass_stop
          STP     x29, x30, [sp, #-16]!
          MOV     x29, sp
          SUB     sp, sp, #16
          MOV     x12, x0
          LDR     w4, hg_oldpointer               ; work out the old pointer shape
          CMP     w4, #-1                         ; is it dead?
          BEQ     %FT10                           ;   yes, so skip all stopping
          BIC     x1, x4, #127                    ; turn off the pointer whilst we change colours
          MOV     x0, #106                        ; select pointer
          SWI     XOS_Byte
; restore the palette up for old pointer
          MOV     x1, sp
; colour 1
          ADR     x2, hg_oldcolours + (4 * 0) + 1
          MOV     w0, #1
          STRB    w0, [x1, #0]
          MOV     w0, #25                         ; set pointer colour 1
          STRB    w0, [x1, #1]
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #2]                    ; red
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #3]                    ; green
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #4]                    ; blue
          MOV     w0, #12
          SWI     XOS_Word                        ; Set palette
          MOV     x1, x4                          ; re-select the old pointer number
          MOV     x0, #106                        ; select pointer
          SWI     XOS_Byte
          MOV     x4, #-1                         ; mark as dead
          STR     x4, hg_oldpointer
          MOV     x0, x12
          BL      hourglass_reset_curcolours
10
          ADD     sp, sp, #16
          LDP     x29, x30, [sp], #16
          RET

; Get the colour information
; =>  R0 = hourglass workspace
;     R1-> where to store pointer to (3 colour words in form &BBGGRR)
; <=  number of colours present
hourglass_getcolours SIGNATURE
          EXPORT  hourglass_getcolours
          MOV     x12, x0
          ADR     x2, hg_curcolours               ; current colours
          STR     x2, [x1]                        ; store to return
          MOV     x0, #1
          RET

hourglass_changecolours SIGNATURE
          EXPORT  hourglass_changecolours
          STP     x29, x30, [sp, #-16]!
          MOV     x29, sp
          SUB     sp, sp, #16
          MOV     x12, x0
          LDR     w4, hg_oldpointer               ; work out the old pointer shape
          CMP     w4, #-1                         ; is it dead?
          BEQ     %FT10                           ;   yes, so skip all stopping
          MOV     x1, sp
; colour 1
          ADR     x2, hg_curcolours + (4 * 0)
          MOV     w0, #1
          STRB    w0, [x1, #0]
          MOV     w0, #25                         ; set pointer colour 1
          STRB    w0, [x1, #1]
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #2]                    ; red
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #3]                    ; green
          LDRB    w0, [x2], #1
          STRB    w0, [x1, #4]                    ; blue
          MOV     w0, #12
          SWI     XOS_Word                        ; Set palette
10
          ADD     sp, sp, #16
          LDP     x29, x30, [sp], #16
          RET

; Frame update - sets the hourglass shape for the current frame
; =>  R0 = hourglass workspace
hourglass_frame SIGNATURE
          EXPORT  hourglass_frame
          STP     x29, x30, [sp, #-16]!
          MOV     x29, sp
          MOV     x12, x0
          LDR     w0, hg_framenum
          ADR     x1, frame_deltas
          LDR     w0, [x1, x0, LSL #2]            ; offset within deltas for this frame
          ADR     x1, deltas
          ADD     x1, x1, x0
          ADRL    x5, hg_currentdata
rowloop
          LDRSW   x3, [x1], #4                    ; r3 = currentdata offset
          CMP     x3, #-1                         ; end of the rows
          BEQ     rowend
      [ wordsperrow = 1
          LDR     w0, [x1], #4                    ; read a word
          STR     w0, [x3, x5]                    ; store into the currentdata
      ]
      [ wordsperrow = 2
          LDP     w0, w2, [x1], #8                ; read two word from rowdata
          ADD     x3, x3, x5                      ; work out the line offset
          STR     w0, [x3]                        ; store into the currentdata
          STR     w2, [x3, #4]                    ; store into the currentdata
      ]
      [ wordsperrow = 3
          LDP     w0, w2, [x1], #8                ; read two words from rowdata
          LDR     w4, [x1]                        ; read final word from rowdata
          ADD     x3, x3, x5                      ; work out the line offset
          STP     w0, w2, [x3], #8                ; store two words to currentdata
          STR     w4, [x3], #4                    ; store final word to currentdata
      ]
      [ wordsperrow = 4
          LDP     w0, w2, [x1], #8                ; read two words from rowdata
          LDP     w4, r5, [x1]                    ; read final words from rowdata
          ADD     r3, r3, r5                      ; work out the line offset
          STP     w0, w2, [x3], #8                ; store two words to currentdata
          STP     w4, w5, [x3], #4                    ; store final words to currentdata
      ]
          B       rowloop

rowend
          MOV     x0, #21                         ; Set Pointer parameters
          ADR     x1, hg_word
          SWI     XOS_Word

          LDRB    w1, hg_word + 1                 ; get the hourglass pointer number we will use
          MOV     w5, #7
          SUB     w4, w5, w1                      ; toggles 3 to 4
          STRB    w4, hg_word + 1                 ; toggles the pointer number we use next time
          MOV     x0, #106                        ; select pointer
          SWI     XOS_Byte

          LDR     w0, hg_framenum
          ADD     w0, w0, #1
          CMP     w0, #nframes
          BNE     %FT10
          MOV     w0, #0                          ; reset counter; we've cycled
10
          STR     w0, hg_framenum
          LDP     x29, x30, [sp], #16
          RET

; Frame update within an IRQ
; =>  R12 = hourglass workspace
hourglass_frame_irq SIGNATURE
          EXPORT  hourglass_frame_irq
          STP     x29, x30, [sp, #-16]!
          MOV     x29, sp
          MOV     x0, x12
          BL      hourglass_frame
          LDP     x29, x30, [sp], #16
          RET

          END
